import { AppsV1Api, HttpError, KubeConfig } from '@kubernetes/client-node';

// const namespace = 'ingress-nginx';  // The namespace where the NGINX Ingress Controller is deployed
// const deploymentName = 'nginx-ingress-controller';  // Adjust based on your Helm release name

async function describeIngressControllerDeployment(deploymentName: string, namespace: string, kubeConfigText: string): Promise<any> {
  try {
    const kc = new KubeConfig();
    kc.loadFromString(kubeConfigText);
    const k8sAppsApi = kc.makeApiClient(AppsV1Api);
    const res = await k8sAppsApi.readNamespacedDeployment(deploymentName, namespace);
    console.log(JSON.stringify(res.body, null, 2));
    return res.body;
  } catch (err) {
    console.log(err)
    if (err instanceof HttpError) {
      console.error('Error fetching NGINX Ingress Controller deployment description:', err.body.message);
    } else {
      console.error('Unknown error:', err);
    }
    throw err;  // Re-throw the error after logging it
  }
}
// const data:any = describeIngressControllerDeployment(
//     'nginx-ingress-controller',
//     "ingress-nginx",
//     `apiVersion: v1
// clusters:
// - cluster:
//     certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJQzM4aERQN3crZ2N3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TkRBMk1qWXhOelV4TWpCYUZ3MHpOREEyTWpReE56VTJNakJhTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUURUM2s0b3FnVnZlSHZsNjJSZjZEdW0rb3FpcXVqaVJvZjd3ZlRuTHlCS2N3NkNRQVNUdkNqNFRlMk0KbnI0U2tRVUhqS2JhN25XV1dKYUhoWVJNa0puTVh2T2V2elk4VXZmQzhhV3A3cnpReTl1VjZMWjcrTVZTcUNZRQpvQTBGZG1nRlhqN1c3T2FRTlQ4NVozTElnckZEQjlmUTNsNVlJN2VJVDBQa25uWk5pQlJzVUxteWl1cTFZYkRyClhreHp4V2Z6N1dDMXBsVUNrNHBIQXdxanlMNjg2OWE1ZDZJOEVMK1VIYnNid0g0SDQxWU03YUEwY0FrR2U2ZFEKdGhvYVJyNHNhdElYNDk2SmdiK3A0SDJ3NXNVTlhNZ2xSVXppaktHYnR0YUcwVG5yVUxSczUzRVN0RStXTTZQTAo0SHNGM0hGREUxcnRCTW1RREljbTZST2xxT3JmQWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJRdXVCQWxnczFZb3lDNjZMM28wQ21VaFF6ekJqQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ0gwOXEyNWdZZgpTL01aTTBtSE1rY2RLaFhKM0hVV2JEUVRhWE5Zc1JKS0lXazdSdTRwU3l4ZWt1OW5RWGpROXJUYlExYzR0SWZUClhydnRiTjFrYW9PYUdqdk9RYXZzLzBjYlQyS3BZMThiWk12NWdhQWhnSGxka24yV24zeWxjOXgvMzVvRUc1UDYKY1Y1RVMrdGNZQzhacGtqNXQwVFprYVh3eGhTb0thQ0RoZFk0cjVGWmhxbUNKQ3hwV0orc0RxUXB2SXZmK3dtdQo2UGNtVnhHbURXamR2UXpTSkpYWkJlNCtPTE1tM3VqY2NVRmlCRDRLNFdPNmR2a2E3YnpzaFZQRHg4cUxHSTg0CnJBVTlwZlBEMWJpUlpySjkxbExWdDByaGI2YWRLeDU1dUJaOXVORWVic09XYnJOa1lyRXNxcVh4WmNMcWlIL1UKRituUmVuSVFZUzlOCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
//     server: https://kubernetes.docker.internal:6443
//   name: docker-desktop
// contexts:
// - context:
//     cluster: docker-desktop
//     user: docker-desktop
//   name: docker-desktop
// current-context: docker-desktop
// kind: Config
// preferences: {}
// users:
// - name: docker-desktop
//   user:
//     client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURRakNDQWlxZ0F3SUJBZ0lJZkZtcEQ4VERPaE13RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TkRBMk1qWXhOelV4TWpCYUZ3MHlOVEEyTWpZeE56VTJNakZhTURZeApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sc3dHUVlEVlFRREV4SmtiMk5yWlhJdFptOXlMV1JsCmMydDBiM0F3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRRGU1am5INWdFaVVDSk8KRmp5eTNTbVFZWWZ5UkJCdW0wOE8vZjduY0lhdXlMQlZtREdXTXRkaUcwbElUOUs5VFRlWmpPY3IxN3o5Umplego2L0ZUNFhoV01UOTIzK1dweXM2T1YzaC9OaDlXQm45RHU3NlhEMGl6VE9qRkx2dk1KcXplLzEvZjJYNlcwc0pYClNSbkhTVGJZL2lSakdITVdZb2pKNm9WdlhHVXdNeVArN1BiZkFiNU45TExBY0ZJaGNjNHo0MDViSjJid3hiQ2IKTE04WGIweUVxRVdnUUFEYkVOTUdxM2RGQ1ByWElYVzY4WDNRL3pIdWdiMGdFZ2FRSDhKQnZWcnVhTWNoMnJMWApIbWQ0Z2NXY1hBbnUrNkpDOFo5WDBlMDYrSzR0dFpzcGcwV1dTVXRldUdVTTZXZVpSZ1hjY1dRTmhHbzlpQW13CkxwVmgzQTVYQWdNQkFBR2pkVEJ6TUE0R0ExVWREd0VCL3dRRUF3SUZvREFUQmdOVkhTVUVEREFLQmdnckJnRUYKQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUI4R0ExVWRJd1FZTUJhQUZDNjRFQ1dDelZpaklMcm92ZWpRS1pTRgpEUE1HTUIwR0ExVWRFUVFXTUJTQ0VtUnZZMnRsY2kxbWIzSXRaR1Z6YTNSdmNEQU5CZ2txaGtpRzl3MEJBUXNGCkFBT0NBUUVBenFZMUdEZUxRV2RKeW1aZ3BDM3ZKODl5OUM5bzRJVHZYNzJLK2xPVWZhY2ZlVkc1OENOSTE3T28KNjBVSnZQZ08rRE5pVERWa3o2NE1RTkhEWG1aTWN5V1RIWEp6Y2JpVkk2SWlwcVNkQnJ4eDlEM2VtblpTdkpwdgpQOHpGa3hDdFlMVS90ZVBmeHpoUVhNWWxtajNQbWVTWE1zNnBKU2IxeUxRNjQrUi9BRklMbVZoYjQrYUxBeHJ3CmlkemxQYzI4c1ZxVUY1TWs0Um5PV2JMT3BjTDhlR2p0M3Z0a25nNHpjNjBXWjZSTlNhdzRCcXBjaFdOakkzS3gKRGFFRXNJSENqYTA0OVF1dlFzRkJDUkp2dXlWTlF3UWNLVUlyL25saWxvbnZ4WWhZZWJyT3lnSWxuUDJzYWE0eQpMbm11NXArK1FUQzNKZDJsblZmOUxuaDlwMXNFd3c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
//     client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBM3VZNXgrWUJJbEFpVGhZOHN0MHBrR0dIOGtRUWJwdFBEdjMrNTNDR3JzaXdWWmd4CmxqTFhZaHRKU0UvU3ZVMDNtWXpuSzllOC9VWTNzK3Z4VStGNFZqRS9kdC9scWNyT2psZDRmellmVmdaL1E3dSsKbHc5SXMwem94Uzc3ekNhczN2OWYzOWwrbHRMQ1Ywa1p4MGsyMlA0a1l4aHpGbUtJeWVxRmIxeGxNRE1qL3V6Mgozd0crVGZTeXdIQlNJWEhPTStOT1d5ZG04TVd3bXl6UEYyOU1oS2hGb0VBQTJ4RFRCcXQzUlFqNjF5RjF1dkY5CjBQOHg3b0c5SUJJR2tCL0NRYjFhN21qSElkcXkxeDVuZUlIRm5Gd0o3dnVpUXZHZlY5SHRPdml1TGJXYktZTkYKbGtsTFhyaGxET2xubVVZRjNIRmtEWVJxUFlnSnNDNlZZZHdPVndJREFRQUJBb0lCQUg4UEliVFBhYW9UbjlwLwpWbzVtLzhCcnVFRGpoN0psR2NYa0I2QUtSdHZ2VG9VY1FuZnA5MWpYVVFqRlo4Mjg3SXE5QlRHNnd1SmxXbTlYCmViTmsvV0cwcFFhd1RveGhMU2w2dHhkYzFMUUc5Qmk2TnNTSlU5blJaNGF2WjUxU0ZvenZhY21DZzJTYU0ybnEKSTZXMEdHM05RUlN6NVRiSGFFNGhQM3JoWWxUOFlaWnJBblRrYWZUdCtoVFJ5eXh0R2VPV1JzeDRwVC9ZalN4awpMZzZkRWp0d1dGVmpaVXBDaVo4dkFzNktnNE5xRWNzK2psMUlNbTlNWGw5aEhMN0lwSVRZYzBuY3NEMTJ4OThQCkN3Wkx1WDJGS2t1Mms2MXVjenRJRjlpRjVtK3VydjJuMVJtTytLN1FZc2d5SGxXVU5rak9EdzY2dHduYkRoRksKb2FjNVU3RUNnWUVBNitEbVJ5cGlTUE4rWlVRUXltcHNvTHFlSnF6VXJtODRUbDlYdHBzelBOVzdDb2FESmhQRwpYaWlxU0xXai9veDJxaFNWbFZwRkhudDEvWUl3V2RNVThVRk1FbU03L2FtMnBSQUQzQWRQL0VPejI3QUhsNWxICkhVQ2gvYlpJSk5QclllWURyZ211aDBzb3R0dmhINDlWK3NKYmM2eUdST3Bwc2VubzMrSk9hSXNDZ1lFQThlbmoKS0FuRWUrKzJhS2hvcjI1aGNHZkVkZEt6VzdSZlpVd1hXM3dXL3h3MVR1Z0xYZ0luN3hDZ25XaytaNml3R3RmbQpxWmxYcVNDdmh6d3h0bU04YnlMZENIRXdvekNHSlk2elRYaTlyV0VOdzl3aDhkUXR4YmJLRHBIMVAzdC9RK0lGCmF4dDdLUFpMRXlkck4wQ0NGbFZOdStIbjNOajJraUVHQnlzdzN1VUNnWUVBbEFwMi9MdFJMRkFHU0RCTUNYNTUKNXZhNVE3UzlWeTFldlhHQmI0NUF2akcyVG9qVnp4UWlMLzU5d1Z5ZkxLZWo0bU5BN3BmVlFhaGpDVlNvVy9mcQo4Ty8yZXFQbGh2TDVPdWV1Ukc0aWVVVlVvTkQrTXR0MGtwdDZEKzVUb1NtUVZjVXpFZ3ZwaWVoV0NVNC9JTHVwClR0U2s2UmlpdktZUzZDTFNrWkZMZkxrQ2dZQWNxWjZkZnRMRjhIZ0hYSFRTM0Z3MUtrWlB3NEEyekY5RkxFZlUKTWhhemNVOHJvemk5a2JuVGpIL0xSczM3RURTVmFhRk4xUHBhOHFGNWYzdFFaZCtpTjFwREJzNUJkNTFkVTlRUQp5TTZJZldoWkhYcjBJVFN2S1dJMWFidktJc0xJY3o0N0c0MXpKQU52S0l0K2gya2laa2NJak5LaEN4L2ozbi9OClY2TzV0UUtCZ1FDZGN1cHBqNTQzbFNuakRlbHkvcDlEK3NGR0l6U0pEem13NFdwOHJpTVRkWkdpYWpENzFOQ00KWjZUb2NyTWtSZEZwYUk0OC9ycW1LNXRtMU93VlI3VFU1SkwxQ1krVDlxK3EweTJ6dTNDMS9jeHJEemJSYVRwTwpsMHpWR2VJeThzZ1lmV0ROcnhhditJUlNCdEFUaFBFRklBbzlzWk5NMUloZHYyNEFLRUpUVEE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
// `
// )
export default describeIngressControllerDeployment;
